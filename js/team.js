const teamData = {
  mentors: [
    {
      name: "",
      role: "Cybersecurity Expert",
      image: "/assect/leaders/mentor1.png",
      linkedin:
        "https://www.linkedin.com/in/dr-snehankita-majalekar-a41b31381/",
      website: "https://snehankita.vercel.app/",
      email: "snehankitamajalekar@yahoo.com",
      specialization: "Network Security",
    },
    {
      name: "",
      role: "Security Consultant",
      image: "/assect/leaders/mentor2.png",
      linkedin: "https://linkedin.com",
      website: "https://example.com",
      email: "mentor2@cybersecclub.com",
      specialization: "Application Security",
    },
  ],
  executives: [
    {
      name: "Atharva Jagdale",
      role: "Lead",
      image: "/assect/leaders/atharva.png",
      linkedin: "https://linkedin.com/in/atharva-jagdale",
      website: "https://example.com",
      email: "atharva@cybersecclub.com",
      github: "https://github.com/atharvajagdale",
    },
    {
      name: "Prajwal Pawer",
      role: "Co-lead",
      image: "/assect/leaders/pawar.png",
      linkedin: "https://www.linkedin.com/in/prajwal-pawar-598b56215",
      website: "https://example.com",
      email: "prajwal@cybersecclub.com",
      github: "https://github.com/prajwalpower",
    },
  ],
  coreAdmin: [
    {
      name: "Soham Aher",
      role: "Secretary",
      image: "/assect/leaders/Soham.png",
      linkedin: "https://www.linkedin.com/in/soham-aher-a75105290",
      email: "soham@cybersecclub.com",
      github: "https://github.com/sohamaher",
    },
    {
      name: "Ganesh Ramauat",
      role: "Treasurer",
      image: "/assect/leaders/ganesh.png",
      linkedin: "https://www.linkedin.com/in/ganesh-ramavat-a28a4628b",
      email: "ganesh@cybersecclub.com",
    },
  ],
  technical: {
    lead: {
      name: "Kaif",
      role: "Technical Lead",
      image: "/assect/leaders/kaif.jpg",
      linkedin: "https://www.linkedin.com/in/kaif-tarasgar-0b5425326",
      github: "https://github.com/kaif",
      website: "https://kaif.dev",
      // email: 'kaif@cybersecclub.com'
    },
    members: [
      {
        name: "Aditya Gupta",
        role: "Member",
        image: "/assect/members/aditya.png",
        linkedin: "https://www.linkedin.com/in/aditya-gupta-709679326",
        github: "https://github.com/adityagupta",
      },
      {
        name: "Ronit Vadodariya",
        role: "Member",
        image: "/assect/members/ronit.png",
        linkedin: "https://linkedin.com/in/ronit-vadodariya",
        github: "https://github.com/ronitvadodariya",
      },
      {
        name: "Vaishnavi Hugade",
        role: "Member",
        image: "/assect/members/vaishnavi.png",
        linkedin: "https://linkedin.com/in/vaishnavi-hugade",
      },
      {
        name: "Sakshi Shinde",
        role: "Member",
        image: "/assect/members/shinde.png",
        linkedin:
          "https://www.linkedin.com/in/sakshi-shinde-b1796b2a3?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app ",
      },
    ],
  },
  marketing: {
    lead: {
      name: "Vaishnavi Shetty",
      role: "Marketing Lead",
      image: "/assect/leaders/shetty.png",
      linkedin: "https://www.linkedin.com/in/vaishnavi-shetty-7859a9310",
      website: "https://vaishnavishetty.com",
      email: "vaishnavi@cybersecclub.com",
    },
    members: [
      {
        name: "Rituja Khobare",
        role: "Member",
        image: "/assect/members/rituja.png",
        linkedin:
          "https://www.linkedin.com/in/rituja-dattatraya-khobare-0a56bb332",
      },
      {
        name: "Sejal Devi",
        role: "Member",
        image: "/assect/members/sejal.png",
        linkedin:
          "https://www.linkedin.com/in/sejal-devi-52a720387?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app ",
      },
    ],
  },
  creative: {
    lead: {
      name: "Rupak Mandave",
      role: "Lead",
      image: "/assect/leaders/rupak.jpg",
      linkedin: "https://www.linkedin.com/in/rupak-mandave-5b3666326",
      website: "https://rupakmandavev.com",
      email: "rupak@cybersecclub.com",
    },
    members: [
      {
        name: "Anurag Raut",
        role: "Member",
        image: "/assect/members/anurag.png",
        linkedin: "https://linkedin.com/in/anuraj-raut",
      },
      {
        name: "Manas Naik",
        role: "Member",
        image: "/assect/members/manas.png",
        linkedin: "https://linkedin.com/in/manas-naik",
      },
      {
        name: "Aarya Wadekar",
        role: "Member",
        image: "/assect/members/aariya.png",
        linkedin: "https://linkedin.com/in/aarya-wadekar",
      },
      {
        name: "Shivam Shinde",
        role: "Member",
        image: "/assect/members/shivam.png",
        linkedin:
          "https://www.linkedin.com/in/shivam-shinde-b67930381?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app ",
      },
    ],
  },
  events: {
    lead: {
      name: "Kaustubh Patil",
      role: "Events Lead",
      image: "/assect/leaders/kaustubh.jpg",
      linkedin: "https://www.linkedin.com/in/kaustubh-sunil-patil-527990289",
      instagram:
        "https://www.instagram.com/invites/contact/?utm_source=ig_contact_invite&utm_medium=copy_link&utm_content=ct99740 ",
      email: "kaustubh@cybersecclub.com",
    },
    members: [
      {
        name: "Kunal Karande",
        role: "Member",
        image: "/assect/members/kunal.png",
        linkedin: "https://linkedin.com/in/kunal-karonda",
      },
      {
        name: "Piyush Pukale",
        role: "Member",
        image: "/assect/members/piyush.png",
        linkedin:
          "https://www.linkedin.com/in/piyush-pukale-2a3502387/?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app",
      },
      {
        name: "Nikita Khairna",
        role: "Member",
        image: "/assect/members/nikita.png",
        linkedin: "https://linkedin.com/in/nikita-khairna",
      },
    ],
  },
};

let currentView = "tree";
let currentFilter = "all";

function createMentorCard(person) {
  const socialLinks = [];
  if (person.linkedin)
    socialLinks.push({
      type: "linkedin",
      url: person.linkedin,
      label: "LinkedIn",
    });
  if (person.github)
    socialLinks.push({ type: "github", url: person.github, label: "GitHub" });
  if (person.website)
    socialLinks.push({
      type: "website",
      url: person.website,
      label: "Website",
    });
  if (person.email)
    socialLinks.push({
      type: "email",
      url: `mailto:${person.email}`,
      label: "Email",
    });

  const socialLinksHTML = socialLinks
    .map((link, idx) => {
      const icons = {
        linkedin:
          '<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',
        github:
          '<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',
        website:
          '',
        email:
          '',
      };

      return `
                    <a href="${link.url}" ${
        link.type !== "email" ? 'target="_blank" rel="noopener noreferrer"' : ""
      } 
                       class="social-link ${
                         link.type
                       }" style="transition-delay: ${idx * 50}ms;">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            ${icons[link.type]}
                        </svg>
                        <div class="tooltip">${link.label}</div>
                    </a>
                `;
    })
    .join("");

  return `
                <div class="mentor-card">
                    <div class="mentor-card-inner">
                        <div class="mentor-card-content">
                            <div class="mentor-card-bg"></div>
                            
                            <div class="mentor-image-section">
                                <div class="mentor-image-wrapper">
                                    <div class="mentor-image-border">
                                        <div class="mentor-image-inner">
                                            <div class="mentor-image-circle">
                                                <img src="${
                                                  person.image
                                                }" alt="${
    person.name
  }" class="mentor-image" loading="lazy">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mentor-status-badge">Expert</div>
                                </div>
                            </div>

                            <div class="mentor-card-info">
                                <div class="mentor-card-name">${
                                  person.name
                                }</div>
                                <div class="mentor-card-role">${
                                  person.role
                                }</div>
                                ${
                                  person.specialization
                                    ? `<div class="mentor-card-spec">${person.specialization}</div>`
                                    : ""
                                }
                            </div>
                        </div>

                        ${
                          socialLinksHTML
                            ? `
                            <div class="mentor-social-links">
                                ${socialLinksHTML}
                            </div>
                        `
                            : ""
                        }
                    </div>
                    <div class="card-spacer"></div>
                </div>
            `;
}

function createPersonCard(person, isHighlight = false, isLarge = false) {
  const socialLinks = [];
  if (person.linkedin)
    socialLinks.push({
      type: "linkedin",
      url: person.linkedin,
      label: "LinkedIn",
    });
  if (person.instagram)
    socialLinks.push({
      type: "instagram",
      url: person.instagram,
      label: "Instagram",
    });
  if (person.github)
    socialLinks.push({ type: "github", url: person.github, label: "GitHub" });
  if (person.website)
    socialLinks.push({
      type: "website",
      url: person.website,
      label: "Website",
    });
  if (person.email)
    socialLinks.push({
      type: "email",
      url: `mailto:${person.email}`,
      label: "Email",
    });

  const socialLinksHTML = socialLinks
    .map((link, idx) => {
      const icons = {
        linkedin:
          '<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',
        instagram: "",
        github:
          '<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',
        website: "",
        email: "",
      };

      return `
                    <a href="${link.url}" ${
        link.type !== "email" ? 'target="_blank" rel="noopener noreferrer"' : ""
      } 
                       class="social-link ${
                         link.type
                       }" style="transition-delay: ${idx * 50}ms;">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            ${icons[link.type]}
                        </svg>
                        <div class="tooltip">${link.label}</div>
                    </a>
                `;
    })
    .join("");

  return `
                <div class="person-card ${isLarge ? "large" : ""}">
                    <div class="card-inner">
                        <div class="card-content ${
                          isHighlight ? "highlight" : ""
                        }">
                            <div class="card-bg-pattern"></div>
                            
                            ${
                              isHighlight
                                ? `
                                <svg class="sparkle-icon" viewBox="0 0 24 24" fill="none" stroke="#fbbf24" stroke-width="2">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                </svg>
                            `
                                : ""
                            }

                            <div class="card-image-section">
                                <div class="image-wrapper">
                                    <div class="image-glow ${
                                      isHighlight ? "highlight-glow" : ""
                                    }"></div>
                                    <div class="image-border ${
                                      isHighlight ? "highlight" : ""
                                    }">
                                        <div class="image-inner ${
                                          isHighlight ? "highlight" : ""
                                        }">
                                            <div class="image-circle ${
                                              isHighlight ? "highlight" : ""
                                            }">
                                                <img src="${
                                                  person.image
                                                }" alt="${
    person.name
  }" class="person-image" loading="lazy">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="status-badge ${
                                      isHighlight ? "highlight" : ""
                                    }">Active</div>
                                </div>
                            </div>

                            <div class="card-info ${
                              isHighlight ? "highlight" : ""
                            }">
                                <div class="card-name">${person.name}</div>
                                <div style="text-align: center;">
                                    <span class="card-role ${
                                      isHighlight ? "highlight" : ""
                                    }">
                                        <span class="role-dot ${
                                          isHighlight ? "highlight" : ""
                                        }"></span>
                                        ${person.role}
                                    </span>
                                </div>
                            </div>
                        </div>

                        ${
                          socialLinksHTML
                            ? `
                            <div class="social-links">
                                ${socialLinksHTML}
                            </div>
                        `
                            : ""
                        }
                    </div>
                    <div class="card-spacer"></div>
                </div>
            `;
}

function getFilteredData() {
  if (currentFilter === "all") return teamData;

  const filtered = {
    mentors: [],
    executives: [],
    coreAdmin: [],
    technical: { lead: null, members: [] },
    marketing: { lead: null, members: [] },
    creative: { lead: null, members: [] },
    events: { lead: null, members: [] },
  };

  switch (currentFilter) {
    case "mentors":
      filtered.mentors = teamData.mentors;
      break;
    case "executive":
      filtered.executives = teamData.executives;
      break;
    case "admin":
      filtered.coreAdmin = teamData.coreAdmin;
      break;
    case "technical":
      filtered.technical = teamData.technical;
      break;
    case "outreach":
      filtered.marketing = teamData.marketing;
      filtered.creative = teamData.creative;
      break;
    case "events":
      filtered.events = teamData.events;
      break;
  }

  return filtered;
}

function renderTreeView() {
  const data = getFilteredData();
  let html = '<div class="tree-view">';

  if (data.mentors.length > 0) {
    html += `
                    <div class="section">
                        <div class="section-badge mentors">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                            </svg>
                            <span>Mentors</span>
                        </div>
                        <div class="cards-row mentor-row">
                            ${data.mentors
                              .map((person) => createMentorCard(person))
                              .join("")}
                        </div>
                    </div>
                    <div class="vertical-line"></div>
                `;
  }

  if (data.executives.length > 0) {
    html += `
                    <div class="section">
                        <div class="section-badge executive">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                            </svg>
                            <span>Executive Leadership</span>
                        </div>
                        <div class="cards-row">
                            ${data.executives
                              .map((person) =>
                                createPersonCard(person, true, true)
                              )
                              .join("")}
                        </div>
                    </div>
                    <div class="vertical-line"></div>
                `;
  }

  if (data.coreAdmin.length > 0) {
    html += `
                    <div class="section">
                        <div class="section-badge admin">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <span>Core Administration</span>
                        </div>
                        <div class="cards-row">
                            ${data.coreAdmin
                              .map((person) => createPersonCard(person, true))
                              .join("")}
                        </div>
                    </div>
                    <div class="vertical-line"></div>
                `;
  }

  const hasDepartments =
    data.technical.lead ||
    data.marketing.lead ||
    data.creative.lead ||
    data.events.lead;
  if (hasDepartments) {
    html += `
                    <div class="section">
                        <div class="section-badge departments" role="img" aria-label="Departments">
                            <img src="/assect/depart.png" alt="Departments" class="badge-icon">
                            <span>Departments</span>
                        </div>
                    </div>
                    <div class="vertical-line short"></div>
                    <div class="departments-grid">
                `;

    if (data.technical.lead) {
      html += `
                        <div class="department">
                            <div class="vertical-line"></div>
                            <div class="department-badge technical">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                </svg>
                                <span>Technical Team</span>
                            </div>
                            <div class="vertical-line short"></div>
                            ${createPersonCard(data.technical.lead, true)}
                            <div class="vertical-line"></div>
                            <div class="members-grid">
                                ${data.technical.members
                                  .map((person) => createPersonCard(person))
                                  .join("")}
                            </div>
                        </div>
                    `;
    }

    if (data.marketing.lead || data.creative.lead) {
      html += `
                        <div class="department">
                            <div class="vertical-line"></div>
                            <div class="department-badge outreach">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 9.62a2.29 2.29 0 0 0-1-1L13 2.29a2.29 2.29 0 0 0-2 0L3 8.62a2.29 2.29 0 0 0-1 1v5a2 2 0 0 0 1 1.73l8 4.65a2 2 0 0 0 2 0l8-4.65a2 2 0 0 0 1-1.73z"></path>
                                    <polyline points="7,10 12,13 17,10"></polyline>
                                    <line x1="12" y1="22.5" x2="12" y2="13"></line>
                                </svg>
                                <span>Outreach & Growth</span>
                            </div>
                            <div class="vertical-line short"></div>
                    `;

      if (data.marketing.lead) {
        html += `
                            <div class="subdepartment">
                                <div class="subdepartment-title">Marketing</div>
                                ${createPersonCard(data.marketing.lead, true)}
                                <div class="vertical-line short"></div>
                                <div class="members-grid">
                                    ${data.marketing.members
                                      .map((person) => createPersonCard(person))
                                      .join("")}
                                </div>
                            </div>
                        `;
      }

      if (data.creative.lead) {
        html += `
                            <div class="vertical-line short"></div>
                            <div class="subdepartment">
                                <div class="subdepartment-title">Creative & Content</div>
                                ${createPersonCard(data.creative.lead, true)}
                                <div class="vertical-line short"></div>
                                <div class="members-grid">
                                    ${data.creative.members
                                      .map((person) => createPersonCard(person))
                                      .join("")}
                                </div>
                                
                            </div>
                        `;
      }

      html += `</div>`;
    }

    if (data.events.lead) {
      html += `
                        <div class="department">
                            <div class="vertical-line"></div>
                            <div class="department-badge events">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                <span>Events & Logistics</span>
                            </div>
                            <div class="vertical-line short"></div>
                            ${createPersonCard(data.events.lead, true)}
                            <div class="vertical-line"></div>
                            <div class="members-grid">
                                ${data.events.members
                                  .slice(0, 2)
                                  .map((person) => createPersonCard(person))
                                  .join("")}
                            </div>
                            ${
                              data.events.members[2]
                                ? `
                                <div class="vertical-line short"></div>
                                <div class="members-grid single">
                                    ${createPersonCard(data.events.members[2])}
                                </div>
                            `
                                : ""
                            }
                        </div>
                    `;
    }

    html += `</div>`;
  }

  html += "</div>";
  return html;
}

function renderGridView() {
  const data = getFilteredData();
  const allMembers = [];

  data.mentors.forEach((person) =>
    allMembers.push({ ...person, isMentor: true })
  );
  data.executives.forEach((person) =>
    allMembers.push({ ...person, isHighlight: true })
  );
  data.coreAdmin.forEach((person) =>
    allMembers.push({ ...person, isHighlight: true })
  );

  if (data.technical.lead) {
    allMembers.push({ ...data.technical.lead, isHighlight: true });
    data.technical.members.forEach((person) =>
      allMembers.push({ ...person, isHighlight: false })
    );
  }

  if (data.marketing.lead) {
    allMembers.push({ ...data.marketing.lead, isHighlight: true });
    data.marketing.members.forEach((person) =>
      allMembers.push({ ...person, isHighlight: false })
    );
  }

  if (data.creative.lead) {
    allMembers.push({ ...data.creative.lead, isHighlight: true });
    data.creative.members.forEach((person) =>
      allMembers.push({ ...person, isHighlight: false })
    );
  }

  if (data.events.lead) {
    allMembers.push({ ...data.events.lead, isHighlight: true });
    data.events.members.forEach((person) =>
      allMembers.push({ ...person, isHighlight: false })
    );
  }

  return `
                <div class="grid-view">
                    ${allMembers
                      .map((member) =>
                        member.isMentor
                          ? createMentorCard(member)
                          : createPersonCard(member, member.isHighlight)
                      )
                      .join("")}
                </div>
            `;
}

function render() {
  const content = document.getElementById("content");
  content.innerHTML =
    currentView === "tree" ? renderTreeView() : renderGridView();
}

document.querySelectorAll(".view-btn").forEach((btn) => {
  btn.addEventListener("click", () => {
    document
      .querySelectorAll(".view-btn")
      .forEach((b) => b.classList.remove("active"));
    btn.classList.add("active");
    currentView = btn.dataset.view;
    render();
  });
});

document.querySelectorAll(".filter-btn").forEach((btn) => {
  btn.addEventListener("click", () => {
    document
      .querySelectorAll(".filter-btn")
      .forEach((b) => b.classList.remove("active"));
    btn.classList.add("active");
    currentFilter = btn.dataset.filter;
    render();
  });
});

render();

const mobileMenuBtn = document.getElementById("mobileMenuBtn");
const mobileMenu = document.getElementById("mobileMenu");

if (mobileMenuBtn && mobileMenu) {
  mobileMenuBtn.addEventListener("click", () => {
    mobileMenu.classList.toggle("active");
  });

  const mobileLinks = mobileMenu.querySelectorAll(".mobile-link");
  mobileLinks.forEach((link) => {
    link.addEventListener("click", () => {
      mobileMenu.classList.remove("active");
    });
  });
}
